# Underlay

- configure ipv4 addressing as per topology
- assign all p2p links to "default" network-instance
- Configure eBGP to SPINE as underlay with following
    + spine1, BGP AS 300, router id 12.12.12.12
    + leaf1, BGP AS 100, router id 1.1.1.1
    + leaf2, BGP AS 200, router id 2.2.2.2
    + allow all routes to be advertised and received
    + use peer-group ebgp-underlay for each adjacency

# Overlay

- Configure ibgp as overlay between leaf1 and leaf2
    + disable afi-safi ipv4, enable evpn
    + use loopback to form ibgp adjacency
    + use as number 1000
    + allow all routes to be advertised and received
    + allow all routes to be advertised and received
    + Verify ibgp has been formed

# access  interface on leaf1 and leaf2
    + configure interface to end-point srv so it will be attachable
      only to mac-vrf network-instance.
    + frame from servers should be treated as untagged.

# vxlan interface on leaf1 and leaf2
    + Create bridged type vxlan tunnel interface with ingress VNI 1
    + verify the tunnel intf configuration

# MAC-VRF on leaf1 and leaf2
    + create new mac-vrf network-instance named SRV
    + associate access interface and vxlan interface with SRV network-instance
    + send ping packet from each server and
    + verify that each mac address has been learned by SRV network-instance

# EVPN in MAC-VRF
    + Configure EVPN to advertise locally learned MACs to remote leafs
    + Use EVPN Virtual Identifier : 111
    + Use 100:111 as RT import and export
    + Verify the RT/RD values
    + Verify that ibgp neighbors has exchanged EVPN routes
    + Verify that network-instance SRV has learned remote srv mac address
