name: jncie-isis-cevo
prefix: ""

topology:
  kinds:
    juniper_cjunosevolved:
      image: arthurk99/juniper-cjunos-evolved:25.2

  nodes:
    # --- Router Definitions (R1 - R8) ---
    r1:
      kind: juniper_cjunosevolved
      startup-config: r1.cfg
    r2:
      kind: juniper_cjunosevolved
      startup-config: r2.cfg
    r3:
      kind: juniper_cjunosevolved
      startup-config: r3.cfg
    r4:
      kind: juniper_cjunosevolved
      startup-config: r4.cfg
    r5:
      kind: juniper_cjunosevolved
      startup-config: r5.cfg
    r6:
      kind: juniper_cjunosevolved
      startup-config: r6.cfg
    r7:
      kind: juniper_cjunosevolved
      startup-config: r7.cfg
    r8:
      kind: juniper_cjunosevolved
      startup-config: r8.cfg

    # --- Switch Mesh (Linux Bridge) ---
    virbr3:
      kind: bridge

  links:
    # --- Point-to-Point Links (LAG) R1 <-> R2 ---
    # eth5 and eth6 maps to et-0/0/1 and et-0/0/2

    - endpoints: ["r1:eth5", "r2:eth5"]
    - endpoints: ["r1:eth6", "r2:eth6"]

    # --- Point-to-Point Links (LAG) R5 <-> R6 ---
    # eth5 and eth6 maps to et-0/0/1 and et-0/0/2

    - endpoints: ["r5:eth5", "r6:eth5"]
    - endpoints: ["r5:eth6", "r6:eth6"]

    # --- Mesh Connections ke Bridge virbr3 ---
    # eth8 maps to et-0/0/4
    
    - endpoints: ["r1:eth8", "virbr3:r1_link"]
    - endpoints: ["r2:eth8", "virbr3:r2_link"]
    - endpoints: ["r3:eth8", "virbr3:r3_link"]
    - endpoints: ["r4:eth8", "virbr3:r4_link"]
    - endpoints: ["r5:eth8", "virbr3:r5_link"]
    - endpoints: ["r6:eth8", "virbr3:r6_link"]
    - endpoints: ["r7:eth8", "virbr3:r7_link"]
    - endpoints: ["r8:eth8", "virbr3:r8_link"]
