name: qinq-lab
prefix: ""
topology:
  nodes:
    # ip : 192.168.101.1/24
    ce1:
      kind: vr-vmx
      image: vrnetlab/juniper_vmx:18.2R1.9
    pe1:
      kind: vr-vmx
      image: vrnetlab/juniper_vmx:18.2R1.9
    pe2:
      kind: vr-vmx
      image: vrnetlab/juniper_vmx:18.2R1.9
    # ip : 192.168.101.2/24
    ce2:
      kind: vr-vmx
      image: vrnetlab/juniper_vmx:18.2R1.9
  links:
    # Access / Trunk
    # C-VLAN 101
    # Link between CE1 and PE1
    - endpoints: ["ce1:ge-0/0/0", "pe1:ge-0/0/0"]
    
    # QinQ Tunnel PE1 and PE2 (Provider Core)
    # Outer Tag (S-VLAN) : 200
    # Inner Tag (C-VLAN) : 101
    - endpoints: ["pe1:ge-0/0/1", "pe2:ge-0/0/1"]

    # Access / Trunk
    # Tags : C-VLAN 101
    # Link between PE2 and CE2
    - endpoints: ["pe2:ge-0/0/0", "ce2:ge-0/0/0"]
